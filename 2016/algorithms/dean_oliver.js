// Functions derived from info at http://www.sfandllaw.com/Articles/What-Wins-Basketball-Games-a-Review-of-Basketball-on-Paper-Rules-and-Tools-for-Performance-Analysis.shtml
function (game, team1, team2) {
  var isUpset = Math.random() < 0.1; // Upsets should happen about 10% of the time

  // obtained from ncaa.com stats by using my web scraper
  var extraStats = {"Villanova": {"dq": "11", "opp_tot_pts": "2166", "to_ratio": "2.7", "own_ppg": "77.0", "opp_topg": "13.85", "opp_3p_fga": "716", "own_tot_pts": "2617", "pts_margin": "13.3", "opp_fga": "1910", "opp_ppg": "63.7", "opp_tot_reb": "1147", "tot_pf": "596", "opp_3p_fg_per": "33.5", "reb_margin": "1.9", "opp_3p_fg": "240", "opp_fg": "764", "opp_tot_to": "471", "opp_rpg": "33.7", "opp_fg_per": "40.0", "pfpg": "17.5"}, "Oklahoma": {"dq": "5", "opp_tot_pts": "2254", "to_ratio": "-.3", "own_ppg": "80.4", "opp_topg": "12.72", "opp_3p_fga": "709", "own_tot_pts": "2573", "pts_margin": "10.0", "opp_fga": "2024", "opp_ppg": "70.4", "opp_tot_reb": "1162", "tot_pf": "538", "opp_3p_fg_per": "34.0", "reb_margin": "2.5", "opp_3p_fg": "241", "opp_fg": "819", "opp_tot_to": "407", "opp_rpg": "36.3", "opp_fg_per": "40.5", "pfpg": "16.8"}, "Miami (Fla.)": {"dq": "6", "opp_tot_pts": "2138", "to_ratio": "1.0", "own_ppg": "75.6", "opp_topg": "11.63", "opp_3p_fga": "548", "own_tot_pts": "2420", "pts_margin": "8.8", "opp_fga": "1839", "opp_ppg": "66.8", "opp_tot_reb": "1038", "tot_pf": "530", "opp_3p_fg_per": "33.6", "reb_margin": "2.3", "opp_3p_fg": "184", "opp_fg": "790", "opp_tot_to": "372", "opp_rpg": "32.4", "opp_fg_per": "43.0", "pfpg": "16.6"}, "UNC-Asheville": {"dq": "13", "opp_tot_pts": "2227", "to_ratio": "2.7", "own_ppg": "75.6", "opp_topg": "15.73", "opp_3p_fga": "677", "own_tot_pts": "2496", "pts_margin": "8.2", "opp_fga": "1897", "opp_ppg": "67.5", "opp_tot_reb": "1172", "tot_pf": "575", "opp_3p_fg_per": "28.4", "reb_margin": "2.3", "opp_3p_fg": "192", "opp_fg": "802", "opp_tot_to": "519", "opp_rpg": "35.5", "opp_fg_per": "42.3", "pfpg": "17.4"}, "Virginia": {"dq": "7", "opp_tot_pts": "1969", "to_ratio": "2.7", "own_ppg": "70.4", "opp_topg": "12.06", "opp_3p_fga": "608", "own_tot_pts": "2322", "pts_margin": "10.7", "opp_fga": "1630", "opp_ppg": "59.7", "opp_tot_reb": "935", "tot_pf": "540", "opp_3p_fg_per": "34.9", "reb_margin": "3.5", "opp_3p_fg": "212", "opp_fg": "687", "opp_tot_to": "398", "opp_rpg": "28.3", "opp_fg_per": "42.1", "pfpg": "16.4"}, "St. Joseph's": {"dq": "9", "opp_tot_pts": "2377", "to_ratio": "1.3", "own_ppg": "77.6", "opp_topg": "11.44", "opp_3p_fga": "872", "own_tot_pts": "2638", "pts_margin": "7.7", "opp_fga": "2110", "opp_ppg": "69.9", "opp_tot_reb": "1212", "tot_pf": "545", "opp_3p_fg_per": "31.0", "reb_margin": "2.9", "opp_3p_fg": "270", "opp_fg": "875", "opp_tot_to": "389", "opp_rpg": "35.6", "opp_fg_per": "41.5", "pfpg": "16.0"}, "Providence": {"dq": "9", "opp_tot_pts": "2301", "to_ratio": "3.1", "own_ppg": "74.0", "opp_topg": "14.61", "opp_3p_fga": "658", "own_tot_pts": "2441", "pts_margin": "4.2", "opp_fga": "1956", "opp_ppg": "69.7", "opp_tot_reb": "1215", "tot_pf": "558", "opp_3p_fg_per": "32.1", "reb_margin": "-.2", "opp_3p_fg": "211", "opp_fg": "850", "opp_tot_to": "482", "opp_rpg": "36.8", "opp_fg_per": "43.5", "pfpg": "16.9"}, "Indiana": {"dq": "7", "opp_tot_pts": "2205", "to_ratio": "-.6", "own_ppg": "82.3", "opp_topg": "13.06", "opp_3p_fga": "583", "own_tot_pts": "2633", "pts_margin": "13.4", "opp_fga": "1859", "opp_ppg": "68.9", "opp_tot_reb": "964", "tot_pf": "582", "opp_3p_fg_per": "34.3", "reb_margin": "7.3", "opp_3p_fg": "200", "opp_fg": "821", "opp_tot_to": "418", "opp_rpg": "30.1", "opp_fg_per": "44.2", "pfpg": "18.2"}, "Cal St. Bakersfield": {"dq": "14", "opp_tot_pts": "2022", "to_ratio": "3.1", "own_ppg": "73.0", "opp_topg": "15.31", "opp_3p_fga": "585", "own_tot_pts": "2337", "pts_margin": "9.8", "opp_fga": "1708", "opp_ppg": "63.2", "opp_tot_reb": "1097", "tot_pf": "687", "opp_3p_fg_per": "32.0", "reb_margin": "4.0", "opp_3p_fg": "187", "opp_fg": "668", "opp_tot_to": "490", "opp_rpg": "34.3", "opp_fg_per": "39.1", "pfpg": "21.5"}, "Southern California": {"dq": "14", "opp_tot_pts": "2467", "to_ratio": ".2", "own_ppg": "80.8", "opp_topg": "12.45", "opp_3p_fga": "740", "own_tot_pts": "2668", "pts_margin": "6.1", "opp_fga": "2153", "opp_ppg": "74.8", "opp_tot_reb": "1249", "tot_pf": "576", "opp_3p_fg_per": "32.3", "reb_margin": "1.6", "opp_3p_fg": "239", "opp_fg": "899", "opp_tot_to": "411", "opp_rpg": "37.8", "opp_fg_per": "41.8", "pfpg": "17.5"}, "Maryland": {"dq": "6", "opp_tot_pts": "2187", "to_ratio": "-1.7", "own_ppg": "76.1", "opp_topg": "11.21", "opp_3p_fga": "693", "own_tot_pts": "2510", "pts_margin": "9.8", "opp_fga": "1956", "opp_ppg": "66.3", "opp_tot_reb": "1058", "tot_pf": "548", "opp_3p_fg_per": "32.2", "reb_margin": "3.4", "opp_3p_fg": "223", "opp_fg": "798", "opp_tot_to": "370", "opp_rpg": "32.1", "opp_fg_per": "40.8", "pfpg": "16.6"}, "Temple": {"dq": "4", "opp_tot_pts": "2158", "to_ratio": "1.9", "own_ppg": "68.7", "opp_topg": "11.09", "opp_3p_fga": "601", "own_tot_pts": "2197", "pts_margin": "1.2", "opp_fga": "1884", "opp_ppg": "67.4", "opp_tot_reb": "1224", "tot_pf": "516", "opp_3p_fg_per": "31.4", "reb_margin": "-1.5", "opp_3p_fg": "189", "opp_fg": "785", "opp_tot_to": "355", "opp_rpg": "38.3", "opp_fg_per": "41.7", "pfpg": "16.1"}, "Texas": {"dq": "12", "opp_tot_pts": "2178", "to_ratio": "2.1", "own_ppg": "71.3", "opp_topg": "12.50", "opp_3p_fga": "586", "own_tot_pts": "2283", "pts_margin": "3.3", "opp_fga": "1801", "opp_ppg": "68.1", "opp_tot_reb": "1151", "tot_pf": "664", "opp_3p_fg_per": "34.3", "reb_margin": "-1.4", "opp_3p_fg": "201", "opp_fg": "754", "opp_tot_to": "400", "opp_rpg": "36.0", "opp_fg_per": "41.9", "pfpg": "20.8"}, "Stony Brook": {"dq": "7", "opp_tot_pts": "2030", "to_ratio": "1.4", "own_ppg": "76.8", "opp_topg": "12.78", "opp_3p_fga": "636", "own_tot_pts": "2458", "pts_margin": "13.4", "opp_fga": "1824", "opp_ppg": "63.4", "opp_tot_reb": "1014", "tot_pf": "509", "opp_3p_fg_per": "32.7", "reb_margin": "7.9", "opp_3p_fg": "208", "opp_fg": "737", "opp_tot_to": "409", "opp_rpg": "31.7", "opp_fg_per": "40.4", "pfpg": "15.9"}, "Arizona": {"dq": "11", "opp_tot_pts": "2277", "to_ratio": "-1.2", "own_ppg": "81.2", "opp_topg": "11.61", "opp_3p_fga": "626", "own_tot_pts": "2680", "pts_margin": "12.2", "opp_fga": "2007", "opp_ppg": "69.0", "opp_tot_reb": "1024", "tot_pf": "601", "opp_3p_fg_per": "32.1", "reb_margin": "9.2", "opp_3p_fg": "201", "opp_fg": "829", "opp_tot_to": "383", "opp_rpg": "31.0", "opp_fg_per": "41.3", "pfpg": "18.2"}, "Iowa": {"dq": "5", "opp_tot_pts": "2130", "to_ratio": "2.7", "own_ppg": "78.1", "opp_topg": "13.13", "opp_3p_fga": "735", "own_tot_pts": "2421", "pts_margin": "9.4", "opp_fga": "1901", "opp_ppg": "68.7", "opp_tot_reb": "1148", "tot_pf": "504", "opp_3p_fg_per": "31.0", "reb_margin": "1.4", "opp_3p_fg": "228", "opp_fg": "788", "opp_tot_to": "407", "opp_rpg": "37.0", "opp_fg_per": "41.5", "pfpg": "16.3"}, "Dayton": {"dq": "15", "opp_tot_pts": "2106", "to_ratio": "-.6", "own_ppg": "73.2", "opp_topg": "12.44", "opp_3p_fga": "671", "own_tot_pts": "2342", "pts_margin": "7.4", "opp_fga": "1829", "opp_ppg": "65.8", "opp_tot_reb": "1065", "tot_pf": "610", "opp_3p_fg_per": "34.9", "reb_margin": "5.4", "opp_3p_fg": "234", "opp_fg": "740", "opp_tot_to": "398", "opp_rpg": "33.3", "opp_fg_per": "40.5", "pfpg": "19.1"}, "Stephen F. Austin": {"dq": "13", "opp_tot_pts": "2021", "to_ratio": "6.2", "own_ppg": "80.7", "opp_topg": "18.63", "opp_3p_fga": "511", "own_tot_pts": "2583", "pts_margin": "17.6", "opp_fga": "1642", "opp_ppg": "63.2", "opp_tot_reb": "1020", "tot_pf": "660", "opp_3p_fg_per": "32.3", "reb_margin": "3.4", "opp_3p_fg": "165", "opp_fg": "719", "opp_tot_to": "596", "opp_rpg": "31.9", "opp_fg_per": "43.8", "pfpg": "20.6"}, "Holy Cross": {"dq": "8", "opp_tot_pts": "2299", "to_ratio": "2.2", "own_ppg": "65.3", "opp_topg": "13.15", "opp_3p_fga": "724", "own_tot_pts": "2156", "pts_margin": "-4.3", "opp_fga": "1755", "opp_ppg": "69.7", "opp_tot_reb": "1177", "tot_pf": "555", "opp_3p_fg_per": "36.5", "reb_margin": "-5.5", "opp_3p_fg": "264", "opp_fg": "803", "opp_tot_to": "434", "opp_rpg": "35.7", "opp_fg_per": "45.8", "pfpg": "16.8"}, "Michigan": {"dq": "3", "opp_tot_pts": "2294", "to_ratio": "2.1", "own_ppg": "74.3", "opp_topg": "11.94", "opp_3p_fga": "695", "own_tot_pts": "2526", "pts_margin": "6.8", "opp_fga": "1896", "opp_ppg": "67.5", "opp_tot_reb": "1122", "tot_pf": "530", "opp_3p_fg_per": "34.5", "reb_margin": "-1.0", "opp_3p_fg": "240", "opp_fg": "844", "opp_tot_to": "406", "opp_rpg": "33.0", "opp_fg_per": "44.5", "pfpg": "15.6"}, "Kansas": {"dq": "9", "opp_tot_pts": "2303", "to_ratio": ".9", "own_ppg": "81.6", "opp_topg": "13.47", "opp_3p_fga": "646", "own_tot_pts": "2773", "pts_margin": "13.8", "opp_fga": "1970", "opp_ppg": "67.7", "opp_tot_reb": "1117", "tot_pf": "641", "opp_3p_fg_per": "32.5", "reb_margin": "4.9", "opp_3p_fg": "210", "opp_fg": "784", "opp_tot_to": "458", "opp_rpg": "32.9", "opp_fg_per": "39.8", "pfpg": "18.9"}, "Utah": {"dq": "5", "opp_tot_pts": "2351", "to_ratio": "-1.9", "own_ppg": "77.6", "opp_topg": "10.44", "opp_3p_fga": "689", "own_tot_pts": "2639", "pts_margin": "8.5", "opp_fga": "2112", "opp_ppg": "69.1", "opp_tot_reb": "1118", "tot_pf": "526", "opp_3p_fg_per": "36.7", "reb_margin": "4.5", "opp_3p_fg": "253", "opp_fg": "873", "opp_tot_to": "355", "opp_rpg": "32.9", "opp_fg_per": "41.3", "pfpg": "15.5"}, "Vanderbilt": {"dq": "22", "opp_tot_pts": "2155", "to_ratio": "-1.7", "own_ppg": "76.8", "opp_topg": "9.97", "opp_3p_fga": "603", "own_tot_pts": "2456", "pts_margin": "9.4", "opp_fga": "1974", "opp_ppg": "67.3", "opp_tot_reb": "1192", "tot_pf": "612", "opp_3p_fg_per": "29.2", "reb_margin": "1.3", "opp_3p_fg": "176", "opp_fg": "762", "opp_tot_to": "319", "opp_rpg": "37.3", "opp_fg_per": "38.6", "pfpg": "19.1"}, "Oregon": {"dq": "11", "opp_tot_pts": "2350", "to_ratio": "2.8", "own_ppg": "78.8", "opp_topg": "14.35", "opp_3p_fga": "670", "own_tot_pts": "2680", "pts_margin": "9.7", "opp_fga": "1970", "opp_ppg": "69.1", "opp_tot_reb": "1119", "tot_pf": "607", "opp_3p_fg_per": "36.3", "reb_margin": "3.2", "opp_3p_fg": "243", "opp_fg": "836", "opp_tot_to": "488", "opp_rpg": "32.9", "opp_fg_per": "42.4", "pfpg": "17.9"}, "Middle Tennessee": {"dq": "13", "opp_tot_pts": "2254", "to_ratio": "1.4", "own_ppg": "72.7", "opp_topg": "13.48", "opp_3p_fga": "620", "own_tot_pts": "2399", "pts_margin": "4.4", "opp_fga": "1799", "opp_ppg": "68.3", "opp_tot_reb": "1146", "tot_pf": "674", "opp_3p_fg_per": "34.4", "reb_margin": "2.2", "opp_3p_fg": "213", "opp_fg": "767", "opp_tot_to": "445", "opp_rpg": "34.7", "opp_fg_per": "42.6", "pfpg": "20.4"}, "Connecticut": {"dq": "7", "opp_tot_pts": "2145", "to_ratio": "1.1", "own_ppg": "73.4", "opp_topg": "12.21", "opp_3p_fga": "709", "own_tot_pts": "2496", "pts_margin": "10.3", "opp_fga": "1931", "opp_ppg": "63.1", "opp_tot_reb": "1164", "tot_pf": "612", "opp_3p_fg_per": "32.7", "reb_margin": "2.3", "opp_3p_fg": "232", "opp_fg": "737", "opp_tot_to": "415", "opp_rpg": "34.2", "opp_fg_per": "38.2", "pfpg": "18.0"}, "California": {"dq": "22", "opp_tot_pts": "2212", "to_ratio": "-2.5", "own_ppg": "75.1", "opp_topg": "9.73", "opp_3p_fga": "513", "own_tot_pts": "2479", "pts_margin": "8.1", "opp_fga": "1940", "opp_ppg": "67.0", "opp_tot_reb": "1097", "tot_pf": "682", "opp_3p_fg_per": "35.1", "reb_margin": "6.7", "opp_3p_fg": "180", "opp_fg": "762", "opp_tot_to": "321", "opp_rpg": "33.2", "opp_fg_per": "39.3", "pfpg": "20.7"}, "Xavier": {"dq": "13", "opp_tot_pts": "2273", "to_ratio": "1.4", "own_ppg": "81.3", "opp_topg": "14.13", "opp_3p_fga": "766", "own_tot_pts": "2603", "pts_margin": "10.3", "opp_fga": "1894", "opp_ppg": "71.0", "opp_tot_reb": "1072", "tot_pf": "646", "opp_3p_fg_per": "31.5", "reb_margin": "7.5", "opp_3p_fg": "241", "opp_fg": "787", "opp_tot_to": "452", "opp_rpg": "33.5", "opp_fg_per": "41.6", "pfpg": "20.2"}, "Northern Iowa": {"dq": "11", "opp_tot_pts": "2139", "to_ratio": "2.0", "own_ppg": "68.0", "opp_topg": "11.79", "opp_3p_fga": "740", "own_tot_pts": "2312", "pts_margin": "5.1", "opp_fga": "1884", "opp_ppg": "62.9", "opp_tot_reb": "1156", "tot_pf": "515", "opp_3p_fg_per": "32.3", "reb_margin": "-3.9", "opp_3p_fg": "239", "opp_fg": "794", "opp_tot_to": "401", "opp_rpg": "34.0", "opp_fg_per": "42.1", "pfpg": "15.1"}, "Michigan St.": {"dq": "8", "opp_tot_pts": "2155", "to_ratio": "-2.3", "own_ppg": "79.8", "opp_topg": "9.56", "opp_3p_fga": "639", "own_tot_pts": "2712", "pts_margin": "16.4", "opp_fga": "1966", "opp_ppg": "63.4", "opp_tot_reb": "1027", "tot_pf": "649", "opp_3p_fg_per": "30.2", "reb_margin": "11.7", "opp_3p_fg": "193", "opp_fg": "741", "opp_tot_to": "325", "opp_rpg": "30.2", "opp_fg_per": "37.7", "pfpg": "19.1"}, "Florida Gulf Coast": {"dq": "10", "opp_tot_pts": "2325", "own_ppg": "77.0", "opp_topg": "12.30", "opp_3p_fga": "719", "own_tot_pts": "2540", "pts_margin": "6.5", "opp_fga": "1986", "opp_ppg": "70.5", "opp_tot_reb": "1161", "tot_pf": "637", "opp_3p_fg_per": "30.2", "reb_margin": "5.0", "opp_3p_fg": "217", "opp_fg": "823", "opp_tot_to": "406", "opp_rpg": "35.2", "opp_fg_per": "41.4", "pfpg": "19.3"}, "Syracuse": {"dq": "12", "opp_tot_pts": "2103", "to_ratio": "1.4", "own_ppg": "70.2", "opp_topg": "13.56", "opp_3p_fga": "739", "own_tot_pts": "2247", "pts_margin": "4.5", "opp_fga": "1835", "opp_ppg": "65.7", "opp_tot_reb": "1182", "tot_pf": "530", "opp_3p_fg_per": "30.4", "reb_margin": "-1.4", "opp_3p_fg": "225", "opp_fg": "759", "opp_tot_to": "434", "opp_rpg": "36.9", "opp_fg_per": "41.4", "pfpg": "16.6"}, "Green Bay": {"dq": "15", "opp_tot_pts": "2788", "to_ratio": "4.8", "own_ppg": "84.2", "opp_topg": "16.86", "opp_3p_fga": "746", "own_tot_pts": "2948", "pts_margin": "4.6", "opp_fga": "2198", "opp_ppg": "79.7", "opp_tot_reb": "1412", "tot_pf": "701", "opp_3p_fg_per": "36.3", "reb_margin": "-1.5", "opp_3p_fg": "271", "opp_fg": "981", "opp_tot_to": "590", "opp_rpg": "40.3", "opp_fg_per": "44.6", "pfpg": "20.0"}, "Iowa St.": {"dq": "12", "opp_tot_pts": "2399", "to_ratio": ".8", "own_ppg": "81.8", "opp_topg": "12.41", "opp_3p_fga": "740", "own_tot_pts": "2619", "pts_margin": "6.9", "opp_fga": "2075", "opp_ppg": "75.0", "opp_tot_reb": "1158", "tot_pf": "497", "opp_3p_fg_per": "33.6", "reb_margin": "-.1", "opp_3p_fg": "249", "opp_fg": "903", "opp_tot_to": "397", "opp_rpg": "36.2", "opp_fg_per": "43.5", "pfpg": "15.5"}, "Chattanooga": {"dq": "6", "opp_tot_pts": "2265", "to_ratio": "1.8", "own_ppg": "75.8", "opp_topg": "14.24", "opp_3p_fga": "694", "own_tot_pts": "2578", "pts_margin": "9.2", "opp_fga": "1910", "opp_ppg": "66.6", "opp_tot_reb": "1101", "tot_pf": "577", "opp_3p_fg_per": "32.4", "reb_margin": "3.4", "opp_3p_fg": "225", "opp_fg": "829", "opp_tot_to": "484", "opp_rpg": "32.4", "opp_fg_per": "43.4", "pfpg": "17.0"}, "Oregon St.": {"dq": "8", "opp_tot_pts": "2169", "to_ratio": "2.1", "own_ppg": "72.1", "opp_topg": "13.55", "opp_3p_fga": "675", "own_tot_pts": "2234", "pts_margin": "2.1", "opp_fga": "1732", "opp_ppg": "70.0", "opp_tot_reb": "1141", "tot_pf": "624", "opp_3p_fg_per": "32.9", "reb_margin": "-2.2", "opp_3p_fg": "222", "opp_fg": "739", "opp_tot_to": "420", "opp_rpg": "36.8", "opp_fg_per": "42.7", "pfpg": "20.1"}, "Purdue": {"dq": "2", "opp_tot_pts": "2196", "to_ratio": "-2.5", "own_ppg": "77.7", "opp_topg": "9.41", "opp_3p_fga": "670", "own_tot_pts": "2643", "pts_margin": "13.1", "opp_fga": "2029", "opp_ppg": "64.6", "opp_tot_reb": "1030", "tot_pf": "584", "opp_3p_fg_per": "31.3", "reb_margin": "10.6", "opp_3p_fg": "210", "opp_fg": "794", "opp_tot_to": "320", "opp_rpg": "30.3", "opp_fg_per": "39.1", "pfpg": "17.2"}, "Fresno St.": {"dq": "27", "opp_tot_pts": "2395", "to_ratio": "4.3", "own_ppg": "75.3", "opp_topg": "15.00", "opp_3p_fga": "743", "own_tot_pts": "2561", "pts_margin": "4.9", "opp_fga": "1879", "opp_ppg": "70.4", "opp_tot_reb": "1237", "tot_pf": "741", "opp_3p_fg_per": "33.0", "reb_margin": "1.2", "opp_3p_fg": "245", "opp_fg": "785", "opp_tot_to": "510", "opp_rpg": "36.4", "opp_fg_per": "41.8", "pfpg": "21.8"}, "West Virginia": {"dq": "17", "opp_tot_pts": "2265", "to_ratio": "4.1", "own_ppg": "79.2", "opp_topg": "18.15", "opp_3p_fga": "599", "own_tot_pts": "2693", "pts_margin": "12.6", "opp_fga": "1658", "opp_ppg": "66.6", "opp_tot_reb": "1045", "tot_pf": "795", "opp_3p_fg_per": "33.2", "reb_margin": "8.4", "opp_3p_fg": "199", "opp_fg": "709", "opp_tot_to": "617", "opp_rpg": "30.7", "opp_fg_per": "42.8", "pfpg": "23.4"}, "Little Rock": {"dq": "4", "opp_tot_pts": "1968", "to_ratio": "3.5", "own_ppg": "70.9", "opp_topg": "14.06", "opp_3p_fga": "672", "own_tot_pts": "2341", "pts_margin": "11.3", "opp_fga": "1710", "opp_ppg": "59.6", "opp_tot_reb": "1113", "tot_pf": "601", "opp_3p_fg_per": "30.7", "reb_margin": ".1", "opp_3p_fg": "206", "opp_fg": "664", "opp_tot_to": "464", "opp_rpg": "33.7", "opp_fg_per": "38.8", "pfpg": "18.2"}, "Hawaii": {"dq": "15", "opp_tot_pts": "2128", "to_ratio": "1.5", "own_ppg": "77.6", "opp_topg": "14.75", "opp_3p_fga": "632", "own_tot_pts": "2483", "pts_margin": "11.1", "opp_fga": "1806", "opp_ppg": "66.5", "opp_tot_reb": "1050", "tot_pf": "648", "opp_3p_fg_per": "31.5", "reb_margin": "4.7", "opp_3p_fg": "199", "opp_fg": "719", "opp_tot_to": "472", "opp_rpg": "32.8", "opp_fg_per": "39.8", "pfpg": "20.3"}, "Kentucky": {"dq": "28", "opp_tot_pts": "2321", "to_ratio": "1.3", "own_ppg": "79.7", "opp_topg": "12.35", "opp_3p_fga": "582", "own_tot_pts": "2709", "pts_margin": "11.4", "opp_fga": "1954", "opp_ppg": "68.3", "opp_tot_reb": "1133", "tot_pf": "696", "opp_3p_fg_per": "33.0", "reb_margin": "5.4", "opp_3p_fg": "192", "opp_fg": "782", "opp_tot_to": "420", "opp_rpg": "33.3", "opp_fg_per": "40.0", "pfpg": "20.5"}, "Baylor": {"dq": "16", "opp_tot_pts": "2285", "to_ratio": ".8", "own_ppg": "77.2", "opp_topg": "13.70", "opp_3p_fga": "622", "own_tot_pts": "2546", "pts_margin": "7.9", "opp_fga": "1794", "opp_ppg": "69.2", "opp_tot_reb": "972", "tot_pf": "636", "opp_3p_fg_per": "36.7", "reb_margin": "7.9", "opp_3p_fg": "228", "opp_fg": "797", "opp_tot_to": "452", "opp_rpg": "29.5", "opp_fg_per": "44.4", "pfpg": "19.3"}, "Austin Peay": {"dq": "12", "opp_tot_pts": "2656", "to_ratio": "-.6", "own_ppg": "76.0", "opp_topg": "13.43", "opp_3p_fga": "824", "own_tot_pts": "2661", "pts_margin": ".1", "opp_fga": "2088", "opp_ppg": "75.9", "opp_tot_reb": "1195", "tot_pf": "610", "opp_3p_fg_per": "35.9", "reb_margin": "2.7", "opp_3p_fg": "296", "opp_fg": "955", "opp_tot_to": "470", "opp_rpg": "34.1", "opp_fg_per": "45.7", "pfpg": "17.4"}, "UNC": {"dq": "4", "opp_tot_pts": "2363", "to_ratio": "2.2", "own_ppg": "82.3", "opp_topg": "13.15", "opp_3p_fga": "728", "own_tot_pts": "2797", "pts_margin": "12.8", "opp_fga": "2046", "opp_ppg": "69.5", "opp_tot_reb": "1112", "tot_pf": "609", "opp_3p_fg_per": "36.0", "reb_margin": "8.3", "opp_3p_fg": "262", "opp_fg": "838", "opp_tot_to": "447", "opp_rpg": "32.7", "opp_fg_per": "41.0", "pfpg": "17.9"}, "VCU": {"dq": "13", "opp_tot_pts": "2288", "to_ratio": "4.0", "own_ppg": "77.2", "opp_topg": "15.44", "opp_3p_fga": "556", "own_tot_pts": "2625", "pts_margin": "9.9", "opp_fga": "1859", "opp_ppg": "67.3", "opp_tot_reb": "1179", "tot_pf": "665", "opp_3p_fg_per": "33.6", "reb_margin": "2.7", "opp_3p_fg": "187", "opp_fg": "818", "opp_tot_to": "525", "opp_rpg": "34.7", "opp_fg_per": "44.0", "pfpg": "19.6"}, "Yale": {"dq": "11", "opp_tot_pts": "1768", "to_ratio": "-.9", "own_ppg": "75.2", "opp_topg": "12.50", "opp_3p_fga": "525", "own_tot_pts": "2105", "pts_margin": "12.0", "opp_fga": "1536", "opp_ppg": "63.1", "opp_tot_reb": "821", "tot_pf": "496", "opp_3p_fg_per": "31.6", "reb_margin": "11.1", "opp_3p_fg": "166", "opp_fg": "625", "opp_tot_to": "350", "opp_rpg": "29.3", "opp_fg_per": "40.7", "pfpg": "17.7"}, "Wisconsin": {"dq": "8", "opp_tot_pts": "2066", "to_ratio": "1.2", "own_ppg": "68.9", "opp_topg": "12.16", "opp_3p_fga": "499", "own_tot_pts": "2204", "pts_margin": "4.3", "opp_fga": "1705", "opp_ppg": "64.6", "opp_tot_reb": "1017", "tot_pf": "542", "opp_3p_fg_per": "37.9", "reb_margin": "3.1", "opp_3p_fg": "189", "opp_fg": "732", "opp_tot_to": "389", "opp_rpg": "31.8", "opp_fg_per": "42.9", "pfpg": "16.9"}, "Buffalo": {"dq": "20", "opp_tot_pts": "2555", "to_ratio": "-.4", "own_ppg": "77.6", "opp_topg": "13.24", "opp_3p_fga": "740", "own_tot_pts": "2637", "pts_margin": "2.4", "opp_fga": "2044", "opp_ppg": "75.1", "opp_tot_reb": "1229", "tot_pf": "723", "opp_3p_fg_per": "33.9", "reb_margin": "3.0", "opp_3p_fg": "251", "opp_fg": "882", "opp_tot_to": "450", "opp_rpg": "36.1", "opp_fg_per": "43.2", "pfpg": "21.3"}, "Notre Dame": {"dq": "4", "opp_tot_pts": "2259", "own_ppg": "75.7", "opp_topg": "9.72", "opp_3p_fga": "655", "own_tot_pts": "2423", "pts_margin": "5.1", "opp_fga": "1918", "opp_ppg": "70.6", "opp_tot_reb": "1082", "tot_pf": "496", "opp_3p_fg_per": "37.6", "reb_margin": "2.3", "opp_3p_fg": "246", "opp_fg": "821", "opp_tot_to": "311", "opp_rpg": "33.8", "opp_fg_per": "42.8", "pfpg": "15.5"}, "Duke": {"dq": "15", "opp_tot_pts": "2378", "to_ratio": "2.3", "own_ppg": "81.5", "opp_topg": "12.18", "opp_3p_fga": "593", "own_tot_pts": "2688", "pts_margin": "9.4", "opp_fga": "2046", "opp_ppg": "72.1", "opp_tot_reb": "1204", "tot_pf": "549", "opp_3p_fg_per": "33.9", "reb_margin": "-.2", "opp_3p_fg": "201", "opp_fg": "911", "opp_tot_to": "402", "opp_rpg": "36.5", "opp_fg_per": "44.5", "pfpg": "16.6"}, "Hampton": {"dq": "9", "opp_tot_pts": "2289", "to_ratio": "-1.5", "own_ppg": "74.8", "opp_topg": "12.52", "opp_3p_fga": "615", "own_tot_pts": "2318", "pts_margin": ".9", "opp_fga": "1874", "opp_ppg": "73.8", "opp_tot_reb": "1132", "tot_pf": "638", "opp_3p_fg_per": "33.0", "reb_margin": "5.1", "opp_3p_fg": "203", "opp_fg": "794", "opp_tot_to": "388", "opp_rpg": "36.5", "opp_fg_per": "42.4", "pfpg": "20.6"}, "Texas Tech": {"dq": "4", "opp_tot_pts": "2165", "to_ratio": ".8", "own_ppg": "72.4", "opp_topg": "12.77", "opp_3p_fga": "674", "own_tot_pts": "2244", "pts_margin": "2.5", "opp_fga": "1777", "opp_ppg": "69.8", "opp_tot_reb": "1045", "tot_pf": "573", "opp_3p_fg_per": "35.2", "reb_margin": ".5", "opp_3p_fg": "237", "opp_fg": "758", "opp_tot_to": "396", "opp_rpg": "33.7", "opp_fg_per": "42.7", "pfpg": "18.5"}, "Cincinnati": {"dq": "6", "opp_tot_pts": "2012", "to_ratio": "2.8", "own_ppg": "73.2", "opp_topg": "13.88", "opp_3p_fga": "648", "own_tot_pts": "2342", "pts_margin": "10.3", "opp_fga": "1849", "opp_ppg": "62.9", "opp_tot_reb": "1107", "tot_pf": "500", "opp_3p_fg_per": "35.6", "reb_margin": "4.8", "opp_3p_fg": "231", "opp_fg": "722", "opp_tot_to": "444", "opp_rpg": "34.6", "opp_fg_per": "39.0", "pfpg": "15.6"}, "Colorado": {"dq": "9", "opp_tot_pts": "2333", "to_ratio": "-2.3", "own_ppg": "76.0", "opp_topg": "11.06", "opp_3p_fga": "580", "own_tot_pts": "2509", "pts_margin": "5.3", "opp_fga": "1980", "opp_ppg": "70.7", "opp_tot_reb": "1106", "tot_pf": "616", "opp_3p_fg_per": "35.5", "reb_margin": "8.9", "opp_3p_fg": "206", "opp_fg": "829", "opp_tot_to": "365", "opp_rpg": "33.5", "opp_fg_per": "41.9", "pfpg": "18.7"}, "South Dakota St.": {"dq": "15", "opp_tot_pts": "2178", "to_ratio": ".3", "own_ppg": "76.6", "opp_topg": "12.19", "opp_3p_fga": "587", "own_tot_pts": "2450", "pts_margin": "8.5", "opp_fga": "1794", "opp_ppg": "68.1", "opp_tot_reb": "1047", "tot_pf": "636", "opp_3p_fg_per": "33.0", "reb_margin": "5.2", "opp_3p_fg": "194", "opp_fg": "745", "opp_tot_to": "390", "opp_rpg": "32.7", "opp_fg_per": "41.5", "pfpg": "19.9"}, "UNC-Wilmington": {"dq": "22", "opp_tot_pts": "2286", "to_ratio": "3.8", "own_ppg": "79.2", "opp_topg": "15.16", "opp_3p_fga": "507", "own_tot_pts": "2535", "pts_margin": "7.8", "opp_fga": "1748", "opp_ppg": "71.4", "opp_tot_reb": "1170", "tot_pf": "761", "opp_3p_fg_per": "33.7", "reb_margin": "1.0", "opp_3p_fg": "171", "opp_fg": "729", "opp_tot_to": "485", "opp_rpg": "36.6", "opp_fg_per": "41.7", "pfpg": "23.8"}, "Seton Hall": {"dq": "16", "opp_tot_pts": "2237", "to_ratio": "-.2", "own_ppg": "74.8", "opp_topg": "13.64", "opp_3p_fga": "652", "own_tot_pts": "2470", "pts_margin": "7.1", "opp_fga": "1971", "opp_ppg": "67.8", "opp_tot_reb": "1185", "tot_pf": "616", "opp_3p_fg_per": "31.6", "reb_margin": "4.1", "opp_3p_fg": "206", "opp_fg": "790", "opp_tot_to": "450", "opp_rpg": "35.9", "opp_fg_per": "40.1", "pfpg": "18.7"}, "Pittsburgh": {"dq": "4", "opp_tot_pts": "2173", "to_ratio": "-.1", "own_ppg": "76.0", "opp_topg": "11.56", "opp_3p_fga": "612", "own_tot_pts": "2433", "pts_margin": "8.1", "opp_fga": "1791", "opp_ppg": "67.9", "opp_tot_reb": "985", "tot_pf": "564", "opp_3p_fg_per": "35.6", "reb_margin": "7.4", "opp_3p_fg": "218", "opp_fg": "781", "opp_tot_to": "370", "opp_rpg": "30.8", "opp_fg_per": "43.6", "pfpg": "17.6"}, "Iona": {"dq": "15", "opp_tot_pts": "2357", "to_ratio": "1.3", "own_ppg": "79.6", "opp_topg": "14.09", "opp_3p_fga": "696", "own_tot_pts": "2547", "pts_margin": "5.9", "opp_fga": "1929", "opp_ppg": "73.7", "opp_tot_reb": "1199", "tot_pf": "622", "opp_3p_fg_per": "35.5", "reb_margin": "-.6", "opp_3p_fg": "247", "opp_fg": "812", "opp_tot_to": "451", "opp_rpg": "37.5", "opp_fg_per": "42.1", "pfpg": "19.4"}, "Texas A&M": {"dq": "7", "opp_tot_pts": "2228", "to_ratio": "2.6", "own_ppg": "75.9", "opp_topg": "14.35", "opp_3p_fga": "763", "own_tot_pts": "2581", "pts_margin": "10.4", "opp_fga": "1930", "opp_ppg": "65.5", "opp_tot_reb": "1191", "tot_pf": "615", "opp_3p_fg_per": "32.9", "reb_margin": "3.9", "opp_3p_fg": "251", "opp_fg": "783", "opp_tot_to": "488", "opp_rpg": "35.0", "opp_fg_per": "40.6", "pfpg": "18.1"}, "Gonzaga": {"dq": "9", "opp_tot_pts": "2186", "to_ratio": "-.9", "own_ppg": "79.7", "opp_topg": "10.33", "opp_3p_fga": "666", "own_tot_pts": "2630", "pts_margin": "13.5", "opp_fga": "1992", "opp_ppg": "66.2", "opp_tot_reb": "1067", "tot_pf": "577", "opp_3p_fg_per": "29.7", "reb_margin": "7.3", "opp_3p_fg": "198", "opp_fg": "795", "opp_tot_to": "341", "opp_rpg": "32.3", "opp_fg_per": "39.9", "pfpg": "17.5"}, "Butler": {"dq": "18", "opp_tot_pts": "2206", "to_ratio": "2.9", "own_ppg": "80.6", "opp_topg": "13.13", "opp_3p_fga": "655", "own_tot_pts": "2498", "pts_margin": "9.4", "opp_fga": "1773", "opp_ppg": "71.2", "opp_tot_reb": "1022", "tot_pf": "617", "opp_3p_fg_per": "33.9", "reb_margin": "3.5", "opp_3p_fg": "222", "opp_fg": "764", "opp_tot_to": "407", "opp_rpg": "33.0", "opp_fg_per": "43.1", "pfpg": "19.9"}, "Weber St.": {"dq": "4", "opp_tot_pts": "2273", "to_ratio": "-2.3", "own_ppg": "76.7", "opp_topg": "10.97", "opp_3p_fga": "565", "own_tot_pts": "2609", "pts_margin": "9.9", "opp_fga": "2054", "opp_ppg": "66.9", "opp_tot_reb": "1127", "tot_pf": "598", "opp_3p_fg_per": "34.5", "reb_margin": "4.4", "opp_3p_fg": "195", "opp_fg": "850", "opp_tot_to": "373", "opp_rpg": "33.1", "opp_fg_per": "41.4", "pfpg": "17.6"}};

  // I could modify my web scraper to get this stat, but it's not available on ncaa.com
  // It's not worth my while to write more code when this estimation is pretty close.
  // Compared to https://www.teamrankings.com/ncaa-basketball/stat/possessions-per-game
  function possessionsPerGame(team) {
    return 1 + (team.field_goals_attempted + 0.475 * team.free_throws_attempted - team.off_reb + team.turnovers)/team.games_played;
  }

  function pointsPerPossession(team) {
    return extraStats[team.name].own_ppg/possessionsPerGame(team);
  }

  // typically about 0.5~0.6
  function trueShootingPercentage(team) {
    return 0.5 * extraStats[team.name].own_tot_pts/(team.field_goals_attempted + 0.475 * team.free_throws_attempted);
  }

  function getWinner(expectedWinner, expectedLoser) {
    return isUpset ? expectedLoser.winsGame() : expectedWinner.winsGame();
  }

  // Based on statistical analyses (according to Dean Oliver), the four most important 
  // keys for team success in basketball and their relative weights, in parentheses, are:
  //    Shoot a high field goal percentage (10)
  //    Do not commit turnovers (5-6)
  //    Get offensive rebounds (4-5)
  //    Get to the foul line frequently (2-3)
  function getTotalWeightedValue(team) {
    var fgPerWeighted = trueShootingPercentage(team) * 1.797; // Average teams should be around 1.0

    var turnoversPerPossesion = team.turnovers_per_game/possessionsPerGame(team);
    var turnoversWeighted = turnoversPerPossesion * 5.92; // Average teams should be around 1.0

    var offRebPerPossession = team.off_reb/team.games_played/possessionsPerGame(team);
    var offRebWeighted = offRebPerPossession * 6.17; // Average teams should be around 1.0

    var freeThrowsPerPossession = team.free_throws_attempted/team.games_played/possessionsPerGame(team);
    var ftWeighted = freeThrowsPerPossession * 3.175; // Average teams should be around 1.0

    return fgPerWeighted*10 - turnoversWeighted*5 + offRebWeighted*4 + ftWeighted*2;
  }

  if (getTotalWeightedValue(team1) > getTotalWeightedValue(team2)) {
    getWinner(team1, team2)
  } else {
    getWinner(team2, team1);
  }
}